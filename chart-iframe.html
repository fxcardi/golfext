<!DOCTYPE html>

<html>
  <head>
<style>
#luzmo-viz-item {
    display: none;  // Hide the chart initially
}
</style>
    <script
      defer
      src="https://cdn.luzmo.com/js/luzmo-embed/5.1.3-beta.3/luzmo-embed.min.js"
      charset="utf-8"
    ></script>
  </head>
  <body>
    
    <div class="container" style="height: 250px;">
          <luzmo-viz-item
        id = "golferChart2"
        apiHost = "https://api.luzmo.com"
        appServer = "https://app.luzmo.com"
        authKey = "75da57ab-637e-4dc4-a68c-b13acc55363f"
        authToken = "N1rdtIzYaAwyT575B7oEaj0McxQjXJOgyacRumooNccP6kK4OR4H7e6n7b7v4oLYl3ibZdwMiPsHc24KE6XSed36h3Po1tGBB6SpvYojw0GspjsrboiHTbE7BCmjDPYywui9U6AfDmcZzL14qbJcyS"
        class="bar-chart"
        type="bar-chart"
        title= "{}"
        options='{
          "theme": "royale",
          "mode": "100",
            "categories": {
              "colored": false
            },
            "axis": {
              "x": {
                "ticksMode": "ticks",
                "scale": "linear"
              },
              "y": {
                "ticksMode": "ticks"
              }
            },
            "hidemodeOption": true,
            "bars": {
              "label": "absolute"
            },
            "display": {
              "title": false,
              "legend": false,
              "modeOption": false
            },
            "legend": {
              "position": "topRight"
            }
            }'
        slots=' [
            {
              "name": "y-axis",
              "content": [
                {
                  "column": "24ce15dd-3807-490a-983f-273bd57fdc61",
                  "set": "1086ce9e-6a9e-46f1-8add-67a423d748f6",
                  "label": {
                    "en": "Year (Yr)"
                  },
                  "type": "datetime",
                  "format": "%d-%m-%Y",
                  "lowestLevel": 9,
                  "level": 1
                }
              ]
            },
            {
              "name": "measure",
              "content": [
                {
                  "column": "a0808f8d-b075-4035-8956-c475266958b6",
                  "set": "1086ce9e-6a9e-46f1-8add-67a423d748f6",
                  "label": {
                    "en": "Earnings"
                  },
                 "type": "numeric",
                  "subtype": "currency",
                  "format": ",.4as",
                  "currency": "$"
              }
            ]
          }
        ]'
      >
      </luzmo-viz-item> 
    </div>
     <div class="container" style="height: 150px;">
      <luzmo-viz-item
        id = "golferChart"
        apiHost = "https://api.luzmo.com"
        appServer = "https://app.luzmo.com"
        authKey = "75da57ab-637e-4dc4-a68c-b13acc55363f"
        authToken = "N1rdtIzYaAwyT575B7oEaj0McxQjXJOgyacRumooNccP6kK4OR4H7e6n7b7v4oLYl3ibZdwMiPsHc24KE6XSed36h3Po1tGBB6SpvYojw0GspjsrboiHTbE7BCmjDPYywui9U6AfDmcZzL14qbJcyS"
        class="line-chart"
        type="line-chart"
        title= '{
        "en": "Rank per year"
        }'
        options='{
          "theme": "royale",
          "bars": {
            "roundedCorners": 7
          },
          "display": {
              "title": true
            },
          "markers": {
              "enabled": true,
              "size": 5
            }
        }'
       slots='[
            {
              "name": "measure",
              "content": [
                {
                  "column": "b7023337-e553-4302-b7c6-e069d589e4bd",
                  "set": "1086ce9e-6a9e-46f1-8add-67a423d748f6",
                  "label": {
                    "en": "RK"
                  },
                  "type": "numeric",
                  "format": ".0f"
                }
              ]
            },
            {
              "name": "x-axis",
              "content": [
                {
                  "column": "24ce15dd-3807-490a-983f-273bd57fdc61",
                  "set": "1086ce9e-6a9e-46f1-8add-67a423d748f6",
                  "label": {
                    "en": "Year (Yr)"
                  },
                  "type": "datetime",
                  "format": "%d-%m-%Y",
                  "lowestLevel": 9,
                  "level": 1
              }
            ]
          }
        ]'
      >
      </luzmo-viz-item> 
    </div>
         <div class="container" style="height: 300px;">
      <luzmo-viz-item
        id = "golferChart3"
        apiHost = "https://api.luzmo.com"
        appServer = "https://app.luzmo.com"
        authKey = "75da57ab-637e-4dc4-a68c-b13acc55363f"
        authToken = "N1rdtIzYaAwyT575B7oEaj0McxQjXJOgyacRumooNccP6kK4OR4H7e6n7b7v4oLYl3ibZdwMiPsHc24KE6XSed36h3Po1tGBB6SpvYojw0GspjsrboiHTbE7BCmjDPYywui9U6AfDmcZzL14qbJcyS"
        class="funnel"
        type="funnel"
        title= '{
        "en": "Rank per year"
        }'
        options='{
          "theme": "royale",
            "display": {
              "title": true,
              "legend": false,
              "categoryLabels": true,
              "values": true
            },
            "mode": "dynamicWidth",
          "markers": {
              "enabled": true,
              "size": 5
            },
          "funnel": {
              "rectangle": false,
              "absValue": true,
              "perc": "ofMax"
            },
          "legend": {
              "position": "right"
            }
        }'
       slots='[
            {
              "name": "measure",
              "content": [
                {
                  "column": "b7bc2cdf-9ff3-4f32-a2ad-ac627065cd5f",
                  "set": "60d65221-8154-4b9d-a613-77a2b30e2198",
                  "label": {
                    "en": "Value"
                  },
                  "type": "numeric",
                  "format": ".0f"
                }
              ]
            },
            {
              "name": "category",
              "content": [
                {
                  "column": "d849b185-e6e6-488f-8e1f-3732c80dce1f",
                  "set": "60d65221-8154-4b9d-a613-77a2b30e2198",
                  "label": {
                    "en": "Category"
                  },
                  "type": "hierarchy",
                  "lowestLevel": 0,
                  "level": 1
                }
              ]
            }
          ]'
      >
      </luzmo-viz-item> 
    </div>
    <script>
        // Function to parse query parameters
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

document.addEventListener("DOMContentLoaded", function() {
    const golferName = getQueryParam('golferName');
    console.log("Golfer name:", golferName);
    golferChart.filters = [{
        "condition": "or",
        "filters": [{
            "expression": "? in ?",
            "parameters": [{
                "column_id": "fd423f32-2f08-4a55-9b09-479d15df30aa",
                "dataset_id": "1086ce9e-6a9e-46f1-8add-67a423d748f6",
                "level": 1
            }, [golferName]]
        }]}];

    console.log("Golfer chart filter:", golferChart.filters);
setTimeout(() => {
golferChart2.filters = [{
        "condition": "or",
        "filters": [{
            "expression": "? in ?",
            "parameters": [{
                "column_id": "fd423f32-2f08-4a55-9b09-479d15df30aa",
                "dataset_id": "1086ce9e-6a9e-46f1-8add-67a423d748f6",
                "level": 1
            }, [golferName]]
        }]}];

  golferChart3.filters = [{
        "condition": "or",
        "filters": [{
            "expression": "? in ?",
            "parameters": [{
                "column_id": "c65e6110-d284-4d97-9c2b-9a2f2ac8dcc4",
                "dataset_id": "60d65221-8154-4b9d-a613-77a2b30e2198",
                "level": 1
            }, [golferName]]
        }]}];      
        }, 800);
});

    </script>
</body>
</html>

  </body>

</html>

